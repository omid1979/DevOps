ONOS چیست و دقیقا چه کاری در mininet انجام میدهد ؟
ONOS (Open Network Operating System) یک کنترل‌کننده نرم‌افزاری متن‌باز برای شبکه‌های تعریف‌شده توسط نرم‌افزار (SDN) است که توسط ON.Lab توسعه داده شده است. این سیستم به‌عنوان یک پلتفرم مدیریت و کنترل شبکه طراحی شده و برای مدیریت شبکه‌های پیچیده و مقیاس‌پذیر به کار می‌رود. ONOS قابلیت‌هایی مانند مدیریت متمرکز، کنترل ترافیک شبکه، مقیاس‌پذیری بالا، و پشتیبانی از پروتکل‌هایی مثل OpenFlow را فراهم می‌کند.
----
ONOS در Mininet چه کاری انجام می‌دهد؟

Mininet یک ابزار شبیه‌سازی شبکه است که امکان ایجاد شبکه‌های مجازی با سوئیچ‌ها، هاست‌ها و کنترل‌کننده‌ها را فراهم می‌کند. ONOS در Mininet به‌عنوان یک کنترل‌کننده SDN عمل می‌کند و وظایف زیر را انجام می‌دهد:

    مدیریت متمرکز شبکه: ONOS به‌عنوان مغز شبکه عمل کرده و تمام سوئیچ‌های OpenFlow در شبکه Mininet را مدیریت می‌کند. این شامل پیکربندی سوئیچ‌ها، تعریف قوانین جریان (Flow Rules) و مدیریت ارتباطات بین هاست‌ها است.
    پروتکل OpenFlow: ONOS از پروتکل OpenFlow برای ارتباط با سوئیچ‌های مجازی در Mininet استفاده می‌کند. این پروتکل به ONOS اجازه می‌دهد تا قوانین جریان را به سوئیچ‌ها ارسال کند تا نحوه هدایت بسته‌های داده در شبکه مشخص شود.
    ایجاد توپولوژی‌های پویا: در Mininet، می‌توانید توپولوژی‌های شبکه مختلفی (مانند خطی، درختی یا سفارشی) ایجاد کنید. ONOS این توپولوژی‌ها را شناسایی کرده و بر اساس آن‌ها سیاست‌های شبکه را اعمال می‌کند.
    ارائه قابلیت‌های پیشرفته:
        مدیریت جریان‌ها: ONOS می‌تواند قوانین جریان را به‌صورت پویا برای هدایت ترافیک، مدیریت پهنای باند، یا اعمال سیاست‌های امنیتی تنظیم کند.
        نظارت و تحلیل: ONOS ابزارهایی برای نظارت بر عملکرد شبکه، مانند پایش ترافیک و شناسایی مشکلات، ارائه می‌دهد.
        مقیاس‌پذیری و افزونگی: ONOS از معماری توزیع‌شده پشتیبانی می‌کند و می‌تواند چندین نمونه از کنترل‌کننده‌ها را برای افزونگی و تحمل خطا مدیریت کند.
    اجرای برنامه‌های شبکه‌ای: ONOS امکان اجرای برنامه‌های کاربردی شبکه‌ای (مانند فایروال، متعادل‌کننده بار یا مدیریت کیفیت خدمات) را فراهم می‌کند که می‌توانند در محیط Mininet آزمایش شوند.

نحوه استفاده از ONOS در Mininet

برای استفاده از ONOS در Mininet، مراحل زیر معمولاً انجام می‌شود:

    نصب ONOS: ابتدا ONOS را روی سیستم خود نصب کنید (معمولاً در یک ماشین مجازی یا به‌صورت مستقیم).
    اجرای Mininet: یک توپولوژی شبکه در Mininet ایجاد کنید و آن را به ONOS متصل کنید. به‌عنوان مثال:
    bash

    sudo mn --controller=remote,ip=<ONOS_IP>,port=6653 --topo=linear,3
    در این دستور، Mininet به ONOS (که روی آدرس IP و پورت مشخص شده اجرا می‌شود) متصل می‌شود.
    پیکربندی ONOS: از رابط کاربری گرافیکی (GUI) یا رابط خط فرمان (CLI) ONOS برای مدیریت شبکه، افزودن قوانین جریان، یا نظارت بر توپولوژی استفاده کنید.
    آزمایش و شبیه‌سازی: با استفاده از ابزارهای Mininet (مانند ping یا iperf) می‌توانید عملکرد شبکه تحت کنترل ONOS را آزمایش کنید.

مثال کاربردی

فرض کنید یک توپولوژی خطی با سه سوئیچ در Mininet ایجاد کرده‌اید. ONOS می‌تواند:

    تمام سوئیچ‌ها را شناسایی کند.
    مسیرهای ارتباطی بین هاست‌ها را تنظیم کند.
    قوانین جریان را برای هدایت ترافیک یا مسدود کردن بسته‌های خاص اعمال کند.
    در صورت خرابی یک لینک، مسیر جایگزین را به‌صورت پویا محاسبه کند.

نتیجه

ONOS در Mininet به‌عنوان یک کنترل‌کننده SDN عمل می‌کند که مدیریت متمرکز، مقیاس‌پذیر و انعطاف‌پذیر شبکه را فراهم می‌کند. این ترکیب برای شبیه‌سازی و آزمایش شبکه‌های SDN در محیط‌های تحقیقاتی و آموزشی بسیار مفید است. برای اطلاعات بیشتر، می‌توانید مستندات رسمی ONOS یا Mininet را بررسی کنید.



برای نصب و راه‌اندازی ONOS (Open Network Operating System) با استفاده از داکر، می‌توانید از ایمیج‌های رسمی ONOS که در Docker Hub موجود است استفاده کنید. در ادامه، مراحل گام‌به‌گام نصب و راه‌اندازی ONOS با داکر در محیط اوبونتو (یا سایر توزیع‌های لینوکس) توضیح داده شده است. اگر از سیستم‌عامل دیگری استفاده می‌کنید، اطمینان حاصل کنید که داکر روی سیستم شما نصب شده باشد.

مشخصات سیستم: حداقل 4 گیگابایت رم و پردازنده 64 بیتی برای اجرای داکر و ONOS توصیه می‌شود.


مراحل نصب و راه‌اندازی ONOS با داکر
1. دانلود ایمیج ONOS

ایمیج رسمی ONOS در Docker Hub موجود است. برای دانلود آخرین نسخه ایمیج ONOS، دستور زیر را اجرا کنید:
bash
docker pull onosproject/onos

اگر از mirror ایرانی استفاده می‌کنید، اطمینان حاصل کنید که تنظیمات mirror به درستی اعمال شده است.
2. اجرای کانتینر ONOS

برای اجرای ONOS در یک کانتینر داکر، از دستور زیر استفاده کنید:
bash
docker run -t -d -p 8181:8181 -p 8101:8101 -p 6653:6653 -p 6633:6633 --name onos onosproject/onos

توضیحات پارامترها:

    -t: اختصاص ترمینال تعاملی.
    -d: اجرای کانتینر در حالت detached (پس‌زمینه).
    -p: نگاشت پورت‌های میزبان به کانتینر:
        8181: برای رابط کاربری وب ONOS.
        8101: برای دسترسی به CLI.
        6653 و 6633: برای پروتکل OpenFlow.
    --name onos: نام‌گذاری کانتینر به‌عنوان "onos".
    onosproject/onos: ایمیج ONOS.

3. بررسی وضعیت کانتینر

برای اطمینان از اینکه کانتینر ONOS در حال اجرا است:
bash
docker ps

باید کانتینر با نام "onos" را در لیست ببینید.
4. دسترسی به رابط کاربری وب ONOS

رابط کاربری وب ONOS روی پورت 8181 در دسترس است. مرورگر خود را باز کنید و به آدرس زیر بروید:
text
http://localhost:8181/onos/ui

    نام کاربری پیش‌فرض: onos
    رمز عبور پیش‌فرض: rocks

5. دسترسی به CLI ONOS

برای دسترسی به رابط خط فرمان (CLI) ONOS، ابتدا به کانتینر متصل شوید:
bash
docker exec -it onos bash

سپس دستور زیر را برای ورود به CLI اجرا کنید:
bash
onos

یا مستقیماً از سیستم میزبان:
bash
ssh -p 8101 onos@localhost

    رمز عبور: rocks

6. اتصال ONOS به Mininet

برای استفاده از ONOS با Mininet، باید Mininet را به کنترل‌کننده ONOS متصل کنید. ابتدا Mininet را نصب کنید (اگر نصب نشده است):
bash
sudo apt install -y mininet

سپس یک توپولوژی ساده در Mininet ایجاد کرده و آن را به ONOS متصل کنید:
bash
sudo mn --controller=remote,ip=127.0.0.1,port=6653 --topo=linear,3

این دستور یک توپولوژی خطی با 3 سوئیچ ایجاد می‌کند که به ONOS در آدرس 127.0.0.1:6653 متصل می‌شود.
7. فعال‌سازی برنامه‌های ONOS

برای استفاده از قابلیت‌های خاص ONOS (مانند OpenFlow یا مدیریت جریان)، باید برنامه‌های مربوطه را فعال کنید. در CLI ONOS، دستور زیر را اجرا کنید:
bash
app activate org.onosproject.openflow

این دستور پشتیبانی از پروتکل OpenFlow را فعال می‌کند.
8. مدیریت و نظارت

    نظارت بر توپولوژی: در رابط کاربری وب، می‌توانید توپولوژی شبکه را مشاهده کنید.
    مدیریت جریان‌ها: از CLI یا رابط وب برای افزودن یا ویرایش قوانین جریان استفاده کنید.
    لاگ‌ها: برای مشاهده لاگ‌های ONOS:
    bash

    docker logs onos

نکات اضافی

    رفع مشکلات تحریم: اگر با خطای دسترسی به Docker Hub مواجه شدید، علاوه بر mirrorهای ایرانی، می‌توانید از VPN یا proxy استفاده کنید یا ایمیج‌ها را از یک سرور خارجی دانلود و به‌صورت دستی وارد کنید:
    bash

docker save onosproject/onos > onos.tar
docker load < onos.tar
پیکربندی پیشرفته: برای پیکربندی‌های پیچیده‌تر (مانند خوشه‌بندی ONOS)، می‌توانید از docker-compose استفاده کنید. یک فایل docker-compose.yml نمونه:
yaml
version: '3'
services:
  onos:
    image: onosproject/onos
    ports:
      - "8181:8181"
      - "8101:8101"
      - "6653:6653"
      - "6633:6633"
    container_name: onos
سپس اجرا کنید:
bash
docker-compose up -d
به‌روزرسانی ONOS: برای به‌روزرسانی، ایمیج جدید را دانلود کنید و کانتینر را بازسازی کنید:
bash
docker pull onosproject/onos
docker rm -f onos
docker run -t -d -p 8181:8181 -p 8101:8101 -p 6653:6653 -p 6633:6633 --name onos onosproject/onos


